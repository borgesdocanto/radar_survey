<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Radar Survey – Inmobiliario</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  <style>
    body{font-family:sans-serif;background:#0b0b0c;color:#f3f4f6;margin:0;padding:20px}
    .card{background:#121317;border:1px solid #1f2330;border-radius:16px;padding:18px;margin-bottom:16px}
    h1{margin:0 0 6px;font-size:22px}
    table{width:100%;border-collapse:collapse;margin-top:10px}
    th,td{padding:8px;border-bottom:1px solid #1f2330;font-size:13px}
    th{color:#9ca3af}
    label{display:block;margin-bottom:6px}
    input{padding:6px 8px;border-radius:6px;border:1px solid #333;background:#1f2330;color:#fff;width:100%;margin-bottom:12px}
    button{padding:8px 14px;border:none;border-radius:8px;background:#e54661;color:#fff;font-weight:bold;cursor:pointer}
  </style>
</head>
<body>
  <div class="card">
    <h1>Radar Survey Inmobiliario</h1>
    <form id="userForm">
      <label>Nombre completo:
        <input type="text" id="fullName" required>
      </label>
      <label>Email:
        <input type="email" id="email" required>
      </label>
      <button type="submit">Comenzar encuesta</button>
    </form>
    <canvas id="radar" height="400" style="display:none"></canvas>
  </div>

  <div class="card" id="questionsCard" style="display:none">
    <h2>Preguntas utilizadas</h2>
    <table>
      <thead><tr><th>#</th><th>Pregunta</th></tr></thead>
      <tbody id="tbl"></tbody>
    </table>
  </div>

  <script>
    const axisNames = [
      "Captación de propiedades",
      "Generación y gestión de leads",
      "Productividad personal y del equipo",
      "Conversión de operaciones"
    ];

    const texts = [
      "¿Publico regularmente contenido que atrae a potenciales vendedores?",
      "¿Tengo un proceso claro para identificar propiedades en venta por dueño directo?",
      "¿Ofrezco valor diferencial al captar para conseguir exclusivas?",

      "¿Respondo a cada lead digital en menos de 1 hora?",
      "¿Uso un CRM para clasificar y nutrir leads automáticamente?",
      "¿Mido de dónde llegan mis mejores leads?",

      "¿Mi agenda diaria refleja prioridades de captación y cierre?",
      "¿Mi equipo sabe exactamente qué acciones debe realizar cada día?",
      "¿Reviso semanalmente métricas de productividad personal y grupal?",

      "¿Realizo seguimiento sistemático de cada interesado hasta cerrar?",
      "¿Uso presentaciones o materiales profesionales para aumentar cierres?",
      "¿Pido referencias a clientes satisfechos para generar nuevas operaciones?"
    ];

    const valsA = [7,6,8, 5,6,7, 6,7,5, 8,6,7];
    const valsQ = Array(texts.length).fill(10);
    const norm = valsA.map((a,i)=> (a/valsQ[i])*10);

    const groups = [
      {label:axisNames[0], idxFrom:0, idxTo:3},
      {label:axisNames[1], idxFrom:3, idxTo:6},
      {label:axisNames[2], idxFrom:6, idxTo:9},
      {label:axisNames[3], idxFrom:9, idxTo:12}
    ];

    const axisScores = groups.map(g=>{
      const slice = norm.slice(g.idxFrom,g.idxTo);
      return slice.reduce((s,x)=>s+x,0)/slice.length;
    });

    const ctx=document.getElementById('radar');
    let chart;

    document.getElementById('userForm').addEventListener('submit', function(e){
      e.preventDefault();
      const name = document.getElementById('fullName').value;
      const mail = document.getElementById('email').value;
      alert(`Gracias ${name}! Registramos tu email: ${mail}`);
      document.getElementById('userForm').style.display = 'none';
      ctx.style.display = 'block';
      document.getElementById('questionsCard').style.display = 'block';

      chart = new Chart(ctx,{type:'radar',data:{
        labels:axisNames,
        datasets:[
          {label:'Resultado',data:axisScores,borderColor:'#e54661',backgroundColor:'rgba(229,70,97,0.2)'}
        ]},options:{scales:{r:{beginAtZero:true,suggestedMax:10}}}});

      const tbody=document.getElementById('tbl');
      texts.forEach((txt,i)=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${i+1}</td><td>${txt}</td>`;
        tbody.appendChild(tr);
      });
    });
  </script>
</body>
</html>
